<!doctype html>
<html lang="en">
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111650202-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-111650202-1');
    </script>

    <title> SurreyBitcoins.com </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style>

      .navbar {
        margin-bottom: 0;
        border-radius: 0;
        color: #FFF;
        background: #1A1A1A;
        padding: 0.5% 0;
        font-size: 1.2em;
        border: 0;
      }
      /* .navbar-brand {
        float: left;
        padding: 0 15px 15px;
        min-height: 55px;
      } */
      .navbar-inverse .navbar-nav .active a, .navbar-inverse .navbar-nav a:focus,
      .navbar-inverse .navbar-nav .active a:hover {
        color: #FFF;
        background-color: #1A1A1A;
      }
      .navbar-inverse .navbar-nav li a {
        color: #A5A5A5;
      }

    </style>

  </head>
  <body BGCOLOR="#E5E5E5">

    <nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <!-- remove navbar-brand if not using a picture -->
          <a class="navbar-brand" href="index.html" style="font-size:1.2em; color:#F2F2F2">SurreyBitcoins</a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
          <ul class="nav navbar-nav navbar-right">
            <li class="active"><a href="index.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contactus.html">Contact Us</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- <img src="img/bitcoin.jpg" style="max-width:100vw"> -->

    <!-- <div id="myCarousel" class="carousel slide" data-ride="carousel">

      <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
        <li data-target="#myCarousel" data-slide-to="3"></li>
      </ol>

      <div class="carousel-inner" role="listbox">
        <div class="item active">
          <img src="img/bitcoin.jpg">
        </div>
        <div class="item">
          <img src="img/bitcoincash.png">
        </div>
        <div class="item">
          <img src="img/ethereum.jpg">
        </div>
      </div>

    </div>  -->

    <div class="container">
      <!-- <h1 style="padding-left:10px"> SurreyBitcoins.com </h1> -->
      <h1> SurreyBitcoins.com </h1>

      <br>

      <!-- <div class="container"> -->
        <div class="row">
          <div class="col-xs-12">
            <table class="table">
              <tr style="background-color:#2A2A2A;color:#FFF">
                <th>Cryptyocurrency</th>
                <th style="text-align:right">Buy (CAD$)</th>
                <th style="text-align:right">Sell (CAD$)</th>
              </tr>
              <tr>
                <td><img src="img/bitcoin.png" style="max-width:20px">&emsp;Bitcoin</td>
                <td id="BTCBUY" align="right"></td>
                <td id="BTCSELL" align="right"></td>
              </tr>
              <tr>
                <td><img src="img/bitcoincash.jpg" style="max-width:20px">&emsp;BitcoinCash</td>
                <td id="BCHBUY" align="right"></td>
                <td id="BCHSELL" align="right"></td>
              </tr>
              <tr>
                <td><img src="img/ethereum.png" style="max-width:20px">&emsp;Ethereum</td>
                <td id="ETHBUY" align="right"></td>
                <td id="ETHSELL" align="right"></td>
              </tr>
              <tr>
                <td><img src="img/litecoin.png" style="max-width:20px">&emsp;Litecoin</td>
                <td id="LTCBUY" align="right"></td>
                <td id="LTCSELL" align="right"></td>
              </tr>
            </table>
          </div>
        </div>
      <!-- </div> -->

      <hr>

      <div >
        <b> User will pay for the transaction fee for <i>both</i> buy and sell.</b>
        <br>
        <br>
        <h5 style="font-weight:bold">DISCLAIMER:</h5>
        <ol type="1">
          <li>Trading in bitcoins and cryptocurrencies is subject to market,
            techincal, and legal risks. Prices vary due to local demandand supply.
            SurreyBitcoins.com does not guarantee any returns. Users use
            SurreyBitcoins.com at their own risk.</li>
          <li>Beware of scams like CRA tax payments, online purchases from unknown
            sellers, charity donations, loan payments, police or immigration payments,
            lotteries, emails, or interact refunds. Please do not send crypto payments
            to anyone who is suspicious. No government agency asks for payment in Bitcoins
            or any other forms cryptocurrency.</li>
        </ol>
      </div>

      <hr>

      <div style="padding-bottom:5px;font-size:8sp">
        <b>Call/Text:</b> (604) 835-1028 &emsp; <b>Email:</b> surreybitcoins@gmail.com
      </div>

    </div>

  </body>

  <script>

    const wss = new WebSocket('wss://api.bitfinex.com/ws/')

    const conv_btc = 1.315
    const conv_bch = 1.32
    const conv_eth = 1.32
    const conv_ltc = 1.32
    
    const buy_margin = 1.04
    const sell_margin = 0.96

    // holds channel ids for each response
    var btc
    var bch
    var eth
    var ltc

    wss.onopen = () => {
      // API keys setup here (See "Authenticated Channels")
      wss.send(JSON.stringify({"event":"subscribe","channel":"ticker","pair":"BTCUSD"}))
      wss.send(JSON.stringify({"event":"subscribe","channel":"ticker","pair":"BCHUSD"}))
      wss.send(JSON.stringify({"event":"subscribe","channel":"ticker","pair":"ETHUSD"}))
      wss.send(JSON.stringify({"event":"subscribe","channel":"ticker","pair":"LTCUSD"}))
    }

    wss.onmessage = (msg) => {
      // console.log(msg.data)

       var response = JSON.parse(msg.data)

       // get channel id for each response
       if(response.pair == "BTCUSD" ) {
         btc = response.chanId
       }
       if(response.pair == "BCHUSD" ) {
         bch = response.chanId
       }
       if(response.pair == "ETHUSD" ) {
         eth = response.chanId
       }
       if(response.pair == "LTCUSD" ) {
         ltc = response.chanId
       }

       var chanid = response[0]

       if(chanid == btc) {
         var hb = response[1]
         if(hb != "hb") {

           document.getElementById('BTCBUY').innerHTML = parseFloat(Math.round(response[3]*conv_btc*buy_margin * 100) / 100).toFixed(2)
           document.getElementById('BTCSELL').innerHTML = parseFloat(Math.round(response[1]*conv_btc*sell_margin * 100) / 100).toFixed(2)

           // first table prototype
           // document.getElementById('btc').innerHTML = "<b>BITCOIN</b> -----------> <b>BUY:</b> " +
           // Number(Math.round(response[3]*conv_btc*1.04+'e'+2)+'e-'+2) +
           // "&emsp;<b>SELL:</b> " +
           // Number(Math.round(response[1]*conv_btc*0.96+'e'+2)+'e-'+2)
         }
       }

       if(chanid == bch) {
         var hb = response[1]
         if(hb != "hb") {

           document.getElementById('BCHBUY').innerHTML = parseFloat(Math.round(response[3]*conv_bch*buy_margin * 100) / 100).toFixed(2)
           document.getElementById('BCHSELL').innerHTML = parseFloat(Math.round(response[1]*conv_bch*sell_margin * 100) / 100).toFixed(2)

           // first table prototype
           // document.getElementById('bch').innerHTML = "<BR><b>BITCOIN CASH</b> --> <b>BUY:</b> " +
           // Number(Math.round(response[3]*1.40*1.04+'e'+2)+'e-'+2) +
           // "&emsp;<b>SELL:</b> " +
           // Number(Math.round(response[1]*1.40*0.96+'e'+2)+'e-'+2)
         }
       }

       if(chanid == eth) {
         var hb = response[1]
         if(hb != "hb") {

           document.getElementById('ETHBUY').innerHTML = parseFloat(Math.round(response[3]*conv_eth*buy_margin * 100) / 100).toFixed(2)
           document.getElementById('ETHSELL').innerHTML = parseFloat(Math.round(response[1]*conv_eth*sell_margin * 100) / 100).toFixed(2)

           // first table prototype
           // document.getElementById('eth').innerHTML = "<BR><b>ETHEREUM</b> -------> <b>BUY:</b> " +
           // Number(Math.round(response[3]*1.40*1.04+'e'+2)+'e-'+2) +
           // "&emsp;<b>SELL:</b> " +
           // Number(Math.round(response[1]*1.40*0.96+'e'+2)+'e-'+2)
         }
       }

       if(chanid == ltc) {
         var hb = response[1]
         if(hb != "hb") {

           document.getElementById('LTCBUY').innerHTML = parseFloat(Math.round(response[3]*conv_ltc*buy_margin * 100) / 100).toFixed(2)
           document.getElementById('LTCSELL').innerHTML = parseFloat(Math.round(response[1]*conv_ltc*sell_margin * 100) / 100).toFixed(2)

           // first table prototype
           // document.getElementById('ltc').innerHTML = "<BR><b>LITECOIN</b> ----------> <b>BUY:</b> " +
           // Number(Math.round(response[3]*1.40*1.04+'e'+2)+'e-'+2) +
           // "&emsp;<b>SELL:</b> " +
           // Number(Math.round(response[1]*1.40*0.96+'e'+2)+'e-'+2)
         }
       }


    }

  </script>

</html>
